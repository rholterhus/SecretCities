(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){},182:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),a=n(31),s=n.n(a),r=(n(107),n(70)),i=n(23),l=(n.p,n(108),n(28)),u=n.n(l),d=n(198),m=n(95),f=n(98),j=n.n(f),b=n(199),p=n(97),O=n.n(p),h=n(96),g=n.n(h),x=n(99),v=n.n(x),C=(n(157),n(7)),N=n(3),y=n(159);u.a.workerClass=n(178).default,u.a.accessToken="pk.eyJ1IjoiaG9sdGVyaHVzIiwiYSI6ImNrOWhkem96ZDB3Z2EzZ25hM3NhMXRuY2QifQ._wWey2Tkg64i1vzd1tUIoQ";var w=Object(d.a)((function(e){return{menuButton:{position:"absolute",left:0,top:0,margin:e.spacing(1)},menuIcon:{fill:"white"},modalCancelButton:{position:"absolute",right:0},modalCancelIcon:{fill:"black",width:"35px",height:"35px"},switch:{position:"absolute",right:0,top:0,margin:e.spacing(.5)},cardRoot:{width:"100%"},modalImageButton:{maxWidth:"10%"},modalImageButtonIcon:{maxWidth:"10%"}}})),S=function(e,t){var n='<div style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">';return n+="<strong>".concat(e,"</strong>"),n+=t?'<img src="'.concat(t,'" style="max-width: 30vmin; max-height: 25vmin;"/>'):"",n+="</div>"};function L(e){var t=e.replace(/^\(|\)$/g,"").split("),(");return t.forEach((function(e,t,n){n[t]=e.split(",").map(Number)})),t[0].reverse()}var k=function(e){var t=e.open,n=e.locations,c=e.mapRef,a=Object(o.useState)(""),s=Object(i.a)(a,2),r=s[0],l=s[1],d=Object(C.f)(),m=/[a-zA-Z]/g.test(r),f=n.filter((function(e){return!m||e.name.toLowerCase().includes(r.toLowerCase())}));return Object(o.useEffect)((function(){null!=c.current&&(n.forEach((function(e){c.current.setFeatureState({source:"locations",id:e.id},{filtered:!1})})),m&&f.forEach((function(e){c.current.setFeatureState({source:"locations",id:e.id},{filtered:!0})})))}),[r]),Object(N.jsxs)("div",{className:"sidebar "+(t?"open":"closed"),children:[Object(N.jsx)(g.a,{onChange:function(e){return l(e)},onCancelSearch:function(){return l("")},style:{width:"100%",borderRadius:0,borderBottom:"1px solid black",boxShadow:"none",backgroundColor:"#f5f5f5"}}),Object(N.jsx)("div",{className:"cards",id:"cards",children:f.map((function(e){return Object(N.jsxs)("div",{className:"cardBase",id:"location-"+e.id,onPointerDown:function(){return d.replace("/MTLsecrets/"+e.name)},children:[Object(N.jsx)("div",{className:"cardButtonContainer",children:Object(N.jsx)("div",{className:"cardButton",style:{backgroundColor:m?"#ff00ff":"red"},onMouseEnter:function(){if(c.current){var t=[e.longitude,e.latitude],n=S(e.name,e.images[0]),o=new u.a.Popup({closeButton:!1,closeOnClick:!1});c.current.flyTo({center:t,esssential:!0,speed:.35}),c.current.fire("closeAllPopups"),o.setLngLat(t).setHTML(n).addTo(c.current),c.current.on("closeAllPopups",(function(){o.remove()}))}},onMouseLeave:function(){return c.current.fire("closeAllPopups")}})}),Object(N.jsx)("div",{className:"cardTitle",children:e.name}),Object(N.jsx)("br",{}),Object(N.jsx)("div",{className:"cardDescription",children:e.description.slice(0,100)})]})}))})]})},I=c.a.memo(k);var T=function(e){var t=e.locations,n=w(),c=Object(C.f)(),a=Object(C.g)().locationName,s=t.map((function(e){return e.name})).indexOf(a),r=t[s],l=Object(o.useState)(0),u=Object(i.a)(l,2),d=u[0];u[1];return r?Object(N.jsxs)("div",{className:"modal",children:[Object(N.jsxs)("div",{className:"modalTitle",children:[r.name,Object(N.jsx)(m.a,{className:n.modalCancelButton,onClick:function(){c.replace("/MTLsecrets")},children:Object(N.jsx)(v.a,{className:n.modalCancelIcon})})]}),Object(N.jsx)("div",{className:"modalImagesContainer",children:Object(N.jsx)("img",{className:"modalImage",src:r.images[d]})}),Object(N.jsx)("div",{className:"modalDescriptionContainer",children:Object(N.jsx)("div",{className:"modalDescription",children:r.description})})]}):null},B=function(){var e=w(),t=Object(C.f)(),n=Object(o.useRef)(null),c=Object(o.useRef)(null),a=Object(o.useState)(-73.6573),s=Object(i.a)(a,2),l=s[0],d=s[1],f=Object(o.useState)(45.5017),p=Object(i.a)(f,2),h=p[0],g=p[1],x=Object(o.useState)(10),v=Object(i.a)(x,2),k=v[0],B=v[1],F=Object(o.useState)(!0),M=Object(i.a)(F,2),E=M[0],P=M[1],R=Object(o.useState)("mapbox://styles/mapbox/streets-v11"),D=Object(i.a)(R,2),z=D[0],A=D[1],Z=Object(o.useState)([]),W=Object(i.a)(Z,2),H=W[0],J=W[1];return Object(o.useEffect)((function(){y.get("http://149.248.60.88:3000/locations").then((function(e){var t=e.data.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{coordinates:L(e.coordinates)})}));J(t),console.log(t)}))}),[]),Object(o.useEffect)((function(){var e=new u.a.Map({container:n.current,style:z,center:[l,h],zoom:k});c.current=e,e.addControl(new u.a.NavigationControl,"top-right"),e.on("move",(function(){d(e.getCenter().lng.toFixed(4)),g(e.getCenter().lat.toFixed(4)),B(e.getZoom().toFixed(2))})),e.on("load",(function(){e.addSource("locations",{type:"geojson",data:{type:"FeatureCollection",features:H.map((function(e){return{type:"Feature",id:e.location_id,properties:{title:e.name,image:e.images[0]},geometry:{type:"Point",coordinates:e.coordinates}}}))}}),e.addLayer({id:"locations",type:"circle",source:"locations",paint:{"circle-color":["case",["boolean",["feature-state","hover"],!1],"#000",["boolean",["feature-state","filtered"],!1],"#ff00ff","#ff0000"],"circle-radius":10,"circle-stroke-width":2,"circle-stroke-color":"#000000"}})}));var o=new u.a.Popup({closeButton:!1,closeOnClick:!1}),a=null;return e.on("mousedown","locations",(function(e){t.push("MTLsecrets/"+e.features[0].properties.title)})),e.on("mousemove","locations",(function(t){e.getCanvas().style.cursor="pointer";for(var n=t.features[0].geometry.coordinates.slice(),s=S(t.features[0].properties.title,t.features[0].properties.image);Math.abs(t.lngLat.lng-n[0])>180;)n[0]+=t.lngLat.lng>n[0]?360:-360;c.current.fire("closeAllPopups"),o.setLngLat(n).setHTML(s).addTo(e),t.features.length>0&&(a&&e.setFeatureState({source:"locations",id:a},{hover:!1}),a=t.features[0].id,e.setFeatureState({source:"locations",id:a},{hover:!0}))})),e.on("mouseleave","locations",(function(){null!=a&&e.setFeatureState({source:"locations",id:a},{hover:!1}),a=null,e.getCanvas().style.cursor="",o.remove()})),function(){return e.remove()}}),[H,z]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"topbar",children:[Object(N.jsx)(m.a,{className:e.menuButton,onClick:function(){return P((function(e){return!e}))},children:E?Object(N.jsx)(O.a,{className:e.menuIcon}):Object(N.jsx)(j.a,{className:e.menuIcon})}),Object(N.jsx)("div",{className:"logo",children:"MTLSECRETS"}),Object(N.jsx)(b.a,{color:"secondary",onChange:function(){A("mapbox://styles/mapbox/streets-v11"===z?"mapbox://styles/mapbox/satellite-v9":"mapbox://styles/mapbox/streets-v11")},className:e.switch})]}),Object(N.jsx)("div",{className:"topSpacer"}),Object(N.jsxs)("div",{className:"mainContent",children:[Object(N.jsx)(I,{open:E,locations:H,mapRef:c}),Object(N.jsx)(C.c,{children:Object(N.jsx)(C.a,{path:"/MTLsecrets/:locationName",children:Object(N.jsx)(T,{locations:H})})})]}),Object(N.jsx)("div",{ref:n,className:"map-container"})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,200)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),o(e),c(e),a(e),s(e)}))},M=n(67);s.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(M.a,{children:Object(N.jsx)(B,{})})}),document.getElementById("root")),F()}},[[182,1,2]]]);
//# sourceMappingURL=main.fb9df8a8.chunk.js.map