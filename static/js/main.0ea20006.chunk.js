(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{113:function(e,t,a){},114:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n=a(44),c=a(0),o=a.n(c),i=a(33),s=a.n(i),r=(a(113),a(7)),l=(a.p,a(114),a(24)),d=a.n(l),u=a(204),m=a(205),j=a(83),b=a(101),g=a.n(b),p=a(68),h=a.n(p),f=a(102),O=a.n(f),x=a(95),v=a.n(x),y=a(35),C=a.n(y),N=a(206),S=a(8),w=a(100),k=a.n(w),L=a(2),B=function(e){return"/"===e.charAt(e.length-1)?e.substr(0,e.length-1):e},I=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},F=a(164);d.a.workerClass=a(182).default,d.a.accessToken="pk.eyJ1IjoiaG9sdGVyaHVzIiwiYSI6ImNrOWhkem96ZDB3Z2EzZ25hM3NhMXRuY2QifQ._wWey2Tkg64i1vzd1tUIoQ";var M=Object(u.a)((function(e){return{menuButton:{position:"absolute",left:0,top:0,margin:e.spacing(1)},menuIcon:{fill:"white"},modalCancelButton:{position:"absolute",right:0},startModalClose:{position:"absolute",right:0,top:0},modalCancelIcon:{fill:"black",width:"35px",height:"35px"},suggestButton:{position:"absolute",right:0,marginRight:e.spacing(1)},cardRoot:{width:"100%"},modalImageButtonLeft:{maxWidth:"10%"},moadlImageButtonRight:{maxWidth:"10%"},loadingCircle:{maxWidth:"50%",maxHeight:"50%"}}})),T=function(e,t){var a='<div style="display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">';return a+="<strong>".concat(e,"</strong>"),a+=t?'<img src="'.concat(t,'" style="max-width: 30vmin; max-height: 25vmin;"/>'):"",a+="</div>"};function E(e){var t=e.replace(/^\(|\)$/g,"").split("),(");return t.forEach((function(e,t,a){a[t]=e.split(",").map(Number)})),t[0].reverse()}function z(e,t){return(e%t+t)%t}var P=function(e){var t=e.open,a=e.locations,n=e.mapRef,o=e.city,i=Object(c.useState)(""),s=Object(r.a)(i,2),l=s[0],u=s[1],m=Object(S.f)(),j=Object(S.g)(),b=/[a-zA-Z]/g.test(l),g=a.filter((function(e){return!b||e.name.toLowerCase().includes(l.toLowerCase())}));return Object(c.useEffect)((function(){null!=n.current&&(a.forEach((function(e){n.current.setFeatureState({source:"locations",id:e.location_id},{filtered:!1})})),b&&g.forEach((function(e){n.current.setFeatureState({source:"locations",id:e.location_id},{filtered:!0})})))}),[l]),Object(L.jsxs)("div",{className:"sidebar "+(t?"open":"closed"),children:[Object(L.jsx)(v.a,{onChange:function(e){return u(e)},onCancelSearch:function(){return u("")},style:{width:"100%",borderRadius:0,borderBottom:"1px solid black",boxShadow:"none",backgroundColor:"#f5f5f5"}}),Object(L.jsx)("div",{className:"cards",id:"cards",children:g.map((function(e){return Object(L.jsxs)("div",{className:"cardBase",id:"location-"+e.location_id,onMouseDown:function(){return m.replace(B(j.pathname)==="/".concat(o)?"".concat(B(j.pathname),"/").concat(e.name):"/".concat(o,"/").concat(e.name))},children:[Object(L.jsx)("div",{className:"cardButtonContainer",children:Object(L.jsx)("div",{className:"cardButton"+(b?" filterUsed":""),onMouseEnter:function(){if(n.current){var t=e.coordinates,a=T(e.name,e.images[0]),c=new d.a.Popup({closeButton:!1,closeOnClick:!1});n.current.flyTo({center:t,esssential:!0,speed:.35}),n.current.fire("closeAllPopups"),c.setLngLat(t).setHTML(a).addTo(n.current),n.current.setFeatureState({source:"locations",id:e.location_id},{hover:!0}),n.current.on("closeAllPopups",(function(){c.remove()}))}},onMouseLeave:function(){n.current.fire("closeAllPopups"),n.current.setFeatureState({source:"locations",id:e.location_id},{hover:!1})}})}),Object(L.jsx)("div",{className:"cardTitle",children:e.name}),Object(L.jsx)("br",{}),Object(L.jsx)("div",{className:"cardDescription",children:e.description.slice(0,100)+"..."})]},e.location_id)}))})]})},R=o.a.memo(P);var D=function(e){var t=e.city,a=e.coordinates,n=M(),o=Object(S.f)(),i=Object(c.useState)(""),s=Object(r.a)(i,2),l=s[0],u=s[1],m=Object(c.useState)(""),b=Object(r.a)(m,2),g=b[0],p=b[1],h=Object(c.useState)(a),f=Object(r.a)(h,2),O=f[0],x=f[1],v=Object(c.useState)(a),y=Object(r.a)(v,2),w=y[0],k=y[1],B=Object(c.useState)(0),I=Object(r.a)(B,2),T=I[0],E=I[1],z=Object(c.useState)("mapbox://styles/mapbox/streets-v11"),P=Object(r.a)(z,2),R=P[0],D=P[1],Z=Object(c.useRef)(null),_=Object(c.useState)(a[0]),U=Object(r.a)(_,2),A=U[0],H=U[1],W=Object(c.useState)(a[1]),J=Object(r.a)(W,2),Q=J[0],G=J[1],V=Object(c.useState)(10),Y=Object(r.a)(V,2),X=Y[0],$=Y[1],q=Object(c.useState)(0),K=Object(r.a)(q,2),ee=K[0],te=K[1],ae=Object(c.useState)(0),ne=Object(r.a)(ae,2),ce=ne[0],oe=ne[1];Object(c.useEffect)((function(){var e=new d.a.Map({container:"suggestionMap",style:R,center:[A,Q],zoom:X,pitch:ee,bearing:ce});Z.current=e,e.addControl(new d.a.NavigationControl,"top-right"),e.on("move",(function(){H(e.getCenter().lng.toFixed(4)),G(e.getCenter().lat.toFixed(4)),$(e.getZoom().toFixed(2)),te(e.getPitch().toFixed(4)),oe(e.getBearing().toFixed(4))}));for(var t=document.getElementsByClassName("mapboxgl-ctrl-top-right"),a=0;a<t.length;++a){var n=t[a].children[0];if(n.childNodes.length<4){var c=document.createElement("button");c.type="button",c.style.overflow="hidden",c.addEventListener("click",(function(){D("mapbox://styles/mapbox/streets-v11"===R?"mapbox://styles/mapbox/satellite-v9":"mapbox://styles/mapbox/streets-v11")})),c.innerHTML='<button class="mapboxgl-cntrl-style" type="button" title="Toggle Map Style" style="display: flex;justify-content: center;align-items: center;"><svg width="20" height="20" viewBox="0 0 24 24"><path d="M13.144 8.171c-.035-.066.342-.102.409-.102.074.009-.196.452-.409.102zm-2.152-3.072l.108-.031c.064.055-.072.095-.051.136.086.155.021.248.008.332-.014.085-.104.048-.149.093-.053.066.258.075.262.085.011.033-.375.089-.304.171.096.136.824-.195.708-.176.225-.113.029-.125-.097-.19-.043-.215-.079-.547-.213-.68l.088-.102c-.206-.299-.36.362-.36.362zm13.008 6.901c0 6.627-5.373 12-12 12-6.628 0-12-5.373-12-12s5.372-12 12-12c6.627 0 12 5.373 12 12zm-8.31-5.371c-.006-.146-.19-.284-.382-.031-.135.174-.111.439-.184.557-.104.175.567.339.567.174.025-.277.732-.063.87-.025.248.069.643-.226.211-.381-.355-.13-.542-.269-.574-.523 0 0 .188-.176.106-.166-.218.027-.614.786-.614.395zm6.296 5.371c0-1.035-.177-2.08-.357-2.632-.058-.174-.189-.312-.359-.378-.256-.1-1.337.597-1.5.254-.107-.229-.324.146-.572.008-.12-.066-.454-.515-.605-.46-.309.111.474.964.688 1.076.201-.152.852-.465.992-.038.268.804-.737 1.685-1.251 2.149-.768.694-.624-.449-1.147-.852-.275-.211-.272-.66-.55-.815-.124-.07-.693-.725-.688-.813l-.017.166c-.094.071-.294-.268-.315-.321 0 .295.48.765.639 1.001.271.405.416.995.748 1.326.178.178.858.914 1.035.898.193-.017.803-.458.911-.433.644.152-1.516 3.205-1.721 3.583-.169.317.138 1.101.113 1.476-.029.433-.37.573-.693.809-.346.253-.265.745-.556.925-.517.318-.889 1.353-1.623 1.348-.216-.001-1.14.36-1.261.007-.094-.256-.22-.45-.353-.703-.13-.248-.015-.505-.173-.724-.109-.152-.475-.497-.508-.677-.002-.155.117-.626.28-.708.229-.117.044-.458.016-.656-.048-.354-.267-.646-.53-.851-.389-.299-.188-.537-.097-.964 0-.204-.124-.472-.398-.392-.564.164-.393-.44-.804-.413-.296.021-.538.209-.813.292-.346.104-.7-.082-1.042-.125-1.407-.178-1.866-1.786-1.499-2.946.037-.19-.114-.542-.048-.689.158-.352.48-.747.762-1.014.158-.15.361-.112.547-.229.287-.181.291-.553.572-.781.4-.325.946-.318 1.468-.388.278-.037 1.336-.266 1.503-.06 0 .038.191.604-.019.572.433.023 1.05.749 1.461.579.211-.088.134-.736.567-.423.262.188 1.436.272 1.68.069.15-.124.234-.93.052-1.021.116.115-.611.124-.679.098-.12-.044-.232.114-.425.025.116.055-.646-.354-.218-.667-.179.131-.346-.037-.539.107-.133.108.062.18-.128.274-.302.153-.53-.525-.644-.602-.116-.076-1.014-.706-.77-.295l.789.785c-.039.025-.207-.286-.207-.059.053-.135.02.579-.104.347-.055-.089.09-.139.006-.268 0-.085-.228-.168-.272-.226-.125-.155-.457-.497-.637-.579-.05-.023-.764.087-.824.11-.07.098-.13.201-.179.311-.148.055-.287.126-.419.214l-.157.353c-.068.061-.765.291-.769.3.029-.075-.487-.171-.453-.321.038-.165.213-.68.168-.868-.048-.197 1.074.284 1.146-.235.029-.225.046-.487-.313-.525.068.008.695-.246.799-.36.146-.168.481-.442.724-.442.284 0 .223-.413.354-.615.131.053-.07.376.087.507-.01-.103.445.057.489.033.104-.054.684-.022.594-.294-.1-.277.051-.195.181-.253-.022.009.34-.619.402-.413-.043-.212-.421.074-.553.063-.305-.024-.176-.52-.061-.665.089-.115-.243-.256-.247-.036-.006.329-.312.627-.241 1.064.108.659-.735-.159-.809-.114-.28.17-.509-.214-.364-.444.148-.235.505-.224.652-.476.104-.178.225-.385.385-.52.535-.449.683-.09 1.216-.041.521.048.176.124.104.324-.069.19.286.258.409.099.07-.092.229-.323.298-.494.089-.222.901-.197.334-.536-.374-.223-2.004-.672-3.096-.672-.236 0-.401.263-.581.412-.356.295-1.268.874-1.775.698-.519-.179-1.63.66-1.808.666-.065.004.004-.634.358-.681-.153.023 1.247-.707 1.209-.859-.046-.18-2.799.822-2.676 1.023.059.092.299.092-.016.294-.18.109-.372.801-.541.801-.505.221-.537-.435-1.099.409l-.894.36c-1.328 1.411-2.247 3.198-2.58 5.183-.013.079.334.226.379.28.112.134.112.712.167.901.138.478.479.744.74 1.179.154.259.41.914.329 1.186.108-.178 1.07.815 1.246 1.022.414.487.733 1.077.061 1.559-.217.156.33 1.129.048 1.368l-.361.093c-.356.219-.195.756.021.982 1.818 1.901 4.38 3.087 7.22 3.087 5.517 0 9.989-4.472 9.989-9.989zm-11.507-6.357c.125-.055.293-.053.311-.22.015-.148.044-.046.08-.1.035-.053-.067-.138-.11-.146-.064-.014-.108.069-.149.104l-.072.019-.068.087.008.048-.087.106c-.085.084.002.139.087.102z"></path></svg></button>\'',n.insertBefore(c,n.firstChild)}}e.on("load",(function(t){e.addSource("clickedLocation",{type:"geojson",data:{type:"FeatureCollection",features:[{geometry:{type:"Point",coordinates:O}}]}}),e.addLayer({id:"clickedLocation",type:"circle",source:"clickedLocation",paint:{"circle-color":"#ff0000","circle-radius":10,"circle-stroke-width":2,"circle-stroke-color":"#000000"}})})),e.on("click",(function(t){x([t.lngLat.lng,t.lngLat.lat]),e.getSource("clickedLocation").setData({type:"FeatureCollection",features:[{geometry:{type:"Point",coordinates:[t.lngLat.lng,t.lngLat.lat]}}]})}))}),[R]);return 1==T?Object(L.jsxs)("div",{className:"modal suggestionScreen",children:[Object(L.jsx)(j.a,{className:n.modalCancelButton,onClick:function(){l||g?window.confirm("Exiting will result in losing your work, are you sure?")&&o.replace("/".concat(t,"/")):o.replace("/".concat(t,"/"))},children:Object(L.jsx)(C.a,{className:n.modalCancelIcon})}),Object(L.jsx)("div",{className:"loadingCircle",children:Object(L.jsx)(N.a,{className:n.loadingCircle})})]}):2==T?Object(L.jsxs)("div",{className:"modal suggestionScreen",children:[Object(L.jsx)(j.a,{className:n.modalCancelButton,onClick:function(){l||g?window.confirm("Exiting will result in losing your work, are you sure?")&&o.replace("/".concat(t,"/")):o.replace("/".concat(t,"/"))},children:Object(L.jsx)(C.a,{className:n.modalCancelIcon})}),Object(L.jsx)("div",{className:"suggestionFinishedText",children:"Suggestion has been submitted. Thank you for contributing."})]}):Object(L.jsxs)("div",{className:"modal suggestionScreen",children:[Object(L.jsxs)("div",{className:"modalTitle",children:["Suggest Location",Object(L.jsx)(j.a,{className:n.modalCancelButton,onClick:function(){l||g?window.confirm("Exiting will result in losing your work, are you sure?")&&o.replace("/".concat(t,"/")):o.replace("/".concat(t,"/"))},children:Object(L.jsx)(C.a,{className:n.modalCancelIcon})})]}),Object(L.jsx)("form",{onSubmit:function(e){e.preventDefault();var a=new FormData(e.target);a.append("city",t),a.append("title",l),a.append("description",g),a.append("coordinates","(".concat(O[1],", ").concat(O[0],")")),a.append("email",w),E(1),F.post("https://secretcities.xyz:8080/suggestion",a,{headers:{"content-type":"multipart/form-data"}}).then((function(e){u(""),p(""),E(2)}))},encType:"multipart/form-data",children:Object(L.jsxs)("div",{className:"suggestionForm",children:[Object(L.jsxs)("div",{className:"suggestionTitle",children:[Object(L.jsx)("div",{children:"Title"}),Object(L.jsx)("input",{type:"text",id:"title",name:"title",onChange:function(e){return u(e.target.value)}})]}),Object(L.jsxs)("div",{className:"suggestionDescription",children:[Object(L.jsx)("div",{children:"Description"}),Object(L.jsx)("textarea",{type:"text",id:"description",name:"description",onChange:function(e){return p(e.target.value)}})]}),Object(L.jsxs)("div",{className:"suggestionCoordinates",children:[Object(L.jsx)("div",{children:"Coordinates (Click Map)"}),Object(L.jsx)("div",{className:"suggestionMapContainer",children:Object(L.jsx)("div",{className:"suggestionMap",id:"suggestionMap"})})]}),Object(L.jsxs)("div",{className:"suggestionImages",children:[Object(L.jsx)("div",{children:"Images"}),Object(L.jsx)("label",{htmlFor:"image",className:"imagesButton",children:"\xa0\xa0\xa0Upload Images\xa0\xa0\xa0"}),Object(L.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",multiple:!0,onChange:function(e){var t=document.getElementById("imagePreviews");t.innerHTML="";for(var a=function(a){var n=new Image;n.className="suggestionImage",n.src=URL.createObjectURL(e.target.files[a]),n.onload=function(){URL.revokeObjectURL(n.src),t.appendChild(n)}},n=0;n<e.target.files.length;n++)a(n)},style:{display:"none"}}),Object(L.jsx)("div",{id:"imagePreviews"})]}),Object(L.jsxs)("div",{className:"suggestionTitle",children:[Object(L.jsx)("div",{children:"Email to be notified when location is posted (Optional)"}),Object(L.jsx)("input",{type:"text",id:"title",name:"title",onChange:function(e){return k(e.target.value)}})]}),Object(L.jsx)("button",{type:"submit",className:"submitButton",children:"Submit Suggestion"})]})})]})},Z=function(e){var t=e.locations,a=e.city,n=M(),o=Object(S.f)(),i=Object(S.h)().locationName,s=t.map((function(e){return e.name})).indexOf(i),l=t[s],d=Object(c.useState)(0),u=Object(r.a)(d,2),m=u[0],b=u[1];return Object(c.useEffect)((function(){b(0)}),[i]),l?Object(L.jsxs)("div",{className:"modal",children:[Object(L.jsxs)("div",{className:"modalTitle",children:[l.name,Object(L.jsx)(j.a,{className:n.modalCancelButton,onClick:function(){o.replace("/".concat(a,"/"))},children:Object(L.jsx)(C.a,{className:n.modalCancelIcon})})]}),Object(L.jsxs)("div",{className:"modalFigure",children:[Object(L.jsxs)("div",{className:"modalImagesContainer",children:[l.images.length>1?Object(L.jsx)(j.a,{className:n.modalImageButtonLeft,onClick:function(){return b((function(e){return z(e-1,l.images.length||1)}))},children:Object(L.jsx)(h.a,{className:n.modalImageButtonIcon})}):null,Object(L.jsx)("img",{className:"modalImage",src:l.images[m]}),l.images.length>1?Object(L.jsx)(j.a,{className:n.modalImageButtonRight,onClick:function(){return b((function(e){return z(e+1,l.images.length||1)}))},children:Object(L.jsx)(O.a,{className:n.modalImageButtonIcon})}):null]}),Object(L.jsx)("div",{className:"modalFigureSubtitle",children:l.caption})]}),Object(L.jsx)("div",{className:"modalDescriptionContainer",children:Object(L.jsx)("div",{className:"modalDescription",children:l.description})})]}):null},_=function(e){var t=e.city,a=e.closeModal,n=M();return Object(L.jsx)("div",{className:"startModal",children:Object(L.jsxs)("div",{className:"startModalCard",children:[Object(L.jsxs)("div",{className:"startModalTitle",children:["Welcome,",Object(L.jsx)(j.a,{className:n.startModalClose,onClick:a,children:Object(L.jsx)(C.a,{className:n.modalCancelIcon})})]}),Object(L.jsxs)("div",{className:"startModalDescription",children:["This is a website dedicated to featuring cool/interesting/secret locations around ",I(t),". In the top right corner there is a button that allows you to suggest locations to be added for others to enjoy. Once your suggestion is submitted it should be posted in a few hours.",Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),"If you want, you can allow this website to know your location and it will display it as a blue dot on the map. This is optional, and even if you do enable it, we do not store this information."]})]})})},U=function(e){var t=e.city,a=e.coordinates,o=e.id,i=e.initialZoom,s=M(),l=Object(S.f)(),u=Object(c.useRef)(null),b=Object(c.useRef)(null),p=Object(c.useState)(a[0]),f=Object(r.a)(p,2),O=f[0],x=f[1],v=Object(c.useState)(a[1]),y=Object(r.a)(v,2),C=y[0],N=y[1],w=Object(c.useState)(i||10),z=Object(r.a)(w,2),P=z[0],U=z[1],A=Object(c.useState)(0),H=Object(r.a)(A,2),W=H[0],J=H[1],Q=Object(c.useState)(0),G=Object(r.a)(Q,2),V=G[0],Y=G[1],X=Object(c.useState)(!1),$=Object(r.a)(X,2),q=$[0],K=$[1],ee=Object(c.useState)(!localStorage.getItem("startModal")),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],ce=Object(c.useState)(null),oe=Object(r.a)(ce,2),ie=oe[0],se=oe[1],re=Object(c.useState)("mapbox://styles/mapbox/streets-v11"),le=Object(r.a)(re,2),de=le[0],ue=le[1],me=Object(c.useState)([]),je=Object(r.a)(me,2),be=je[0],ge=je[1],pe=Object(S.g)();return Object(c.useEffect)((function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){se(e)}))}),[]),Object(c.useEffect)((function(){F.get("https://secretcities.xyz:8080/locations?city_id=".concat(o)).then((function(e){var t=e.data.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{coordinates:E(e.coordinates)})}));ge(t)}))}),[]),Object(c.useEffect)((function(){document.title="".concat(I(t)," Secrets")}),[]),Object(c.useEffect)((function(){var e=new d.a.Map({container:u.current,style:de,center:[O,C],zoom:P,pitch:W,bearing:V});b.current=e,e.addControl(new d.a.NavigationControl,"top-right");for(var t=document.getElementsByClassName("mapboxgl-ctrl-top-right"),a=0;a<t.length;++a){var n=t[a].children[0];if(n.childNodes.length<4){var c=document.createElement("button");c.style.overflow="hidden",c.addEventListener("click",(function(){ue("mapbox://styles/mapbox/streets-v11"===de?"mapbox://styles/mapbox/satellite-v9":"mapbox://styles/mapbox/streets-v11")})),c.innerHTML='<button class="mapboxgl-cntrl-style" type="button" title="Toggle Map Style" style="display: flex;justify-content: center;align-items: center;"><svg width="20" height="20" viewBox="0 0 24 24"><path d="M13.144 8.171c-.035-.066.342-.102.409-.102.074.009-.196.452-.409.102zm-2.152-3.072l.108-.031c.064.055-.072.095-.051.136.086.155.021.248.008.332-.014.085-.104.048-.149.093-.053.066.258.075.262.085.011.033-.375.089-.304.171.096.136.824-.195.708-.176.225-.113.029-.125-.097-.19-.043-.215-.079-.547-.213-.68l.088-.102c-.206-.299-.36.362-.36.362zm13.008 6.901c0 6.627-5.373 12-12 12-6.628 0-12-5.373-12-12s5.372-12 12-12c6.627 0 12 5.373 12 12zm-8.31-5.371c-.006-.146-.19-.284-.382-.031-.135.174-.111.439-.184.557-.104.175.567.339.567.174.025-.277.732-.063.87-.025.248.069.643-.226.211-.381-.355-.13-.542-.269-.574-.523 0 0 .188-.176.106-.166-.218.027-.614.786-.614.395zm6.296 5.371c0-1.035-.177-2.08-.357-2.632-.058-.174-.189-.312-.359-.378-.256-.1-1.337.597-1.5.254-.107-.229-.324.146-.572.008-.12-.066-.454-.515-.605-.46-.309.111.474.964.688 1.076.201-.152.852-.465.992-.038.268.804-.737 1.685-1.251 2.149-.768.694-.624-.449-1.147-.852-.275-.211-.272-.66-.55-.815-.124-.07-.693-.725-.688-.813l-.017.166c-.094.071-.294-.268-.315-.321 0 .295.48.765.639 1.001.271.405.416.995.748 1.326.178.178.858.914 1.035.898.193-.017.803-.458.911-.433.644.152-1.516 3.205-1.721 3.583-.169.317.138 1.101.113 1.476-.029.433-.37.573-.693.809-.346.253-.265.745-.556.925-.517.318-.889 1.353-1.623 1.348-.216-.001-1.14.36-1.261.007-.094-.256-.22-.45-.353-.703-.13-.248-.015-.505-.173-.724-.109-.152-.475-.497-.508-.677-.002-.155.117-.626.28-.708.229-.117.044-.458.016-.656-.048-.354-.267-.646-.53-.851-.389-.299-.188-.537-.097-.964 0-.204-.124-.472-.398-.392-.564.164-.393-.44-.804-.413-.296.021-.538.209-.813.292-.346.104-.7-.082-1.042-.125-1.407-.178-1.866-1.786-1.499-2.946.037-.19-.114-.542-.048-.689.158-.352.48-.747.762-1.014.158-.15.361-.112.547-.229.287-.181.291-.553.572-.781.4-.325.946-.318 1.468-.388.278-.037 1.336-.266 1.503-.06 0 .038.191.604-.019.572.433.023 1.05.749 1.461.579.211-.088.134-.736.567-.423.262.188 1.436.272 1.68.069.15-.124.234-.93.052-1.021.116.115-.611.124-.679.098-.12-.044-.232.114-.425.025.116.055-.646-.354-.218-.667-.179.131-.346-.037-.539.107-.133.108.062.18-.128.274-.302.153-.53-.525-.644-.602-.116-.076-1.014-.706-.77-.295l.789.785c-.039.025-.207-.286-.207-.059.053-.135.02.579-.104.347-.055-.089.09-.139.006-.268 0-.085-.228-.168-.272-.226-.125-.155-.457-.497-.637-.579-.05-.023-.764.087-.824.11-.07.098-.13.201-.179.311-.148.055-.287.126-.419.214l-.157.353c-.068.061-.765.291-.769.3.029-.075-.487-.171-.453-.321.038-.165.213-.68.168-.868-.048-.197 1.074.284 1.146-.235.029-.225.046-.487-.313-.525.068.008.695-.246.799-.36.146-.168.481-.442.724-.442.284 0 .223-.413.354-.615.131.053-.07.376.087.507-.01-.103.445.057.489.033.104-.054.684-.022.594-.294-.1-.277.051-.195.181-.253-.022.009.34-.619.402-.413-.043-.212-.421.074-.553.063-.305-.024-.176-.52-.061-.665.089-.115-.243-.256-.247-.036-.006.329-.312.627-.241 1.064.108.659-.735-.159-.809-.114-.28.17-.509-.214-.364-.444.148-.235.505-.224.652-.476.104-.178.225-.385.385-.52.535-.449.683-.09 1.216-.041.521.048.176.124.104.324-.069.19.286.258.409.099.07-.092.229-.323.298-.494.089-.222.901-.197.334-.536-.374-.223-2.004-.672-3.096-.672-.236 0-.401.263-.581.412-.356.295-1.268.874-1.775.698-.519-.179-1.63.66-1.808.666-.065.004.004-.634.358-.681-.153.023 1.247-.707 1.209-.859-.046-.18-2.799.822-2.676 1.023.059.092.299.092-.016.294-.18.109-.372.801-.541.801-.505.221-.537-.435-1.099.409l-.894.36c-1.328 1.411-2.247 3.198-2.58 5.183-.013.079.334.226.379.28.112.134.112.712.167.901.138.478.479.744.74 1.179.154.259.41.914.329 1.186.108-.178 1.07.815 1.246 1.022.414.487.733 1.077.061 1.559-.217.156.33 1.129.048 1.368l-.361.093c-.356.219-.195.756.021.982 1.818 1.901 4.38 3.087 7.22 3.087 5.517 0 9.989-4.472 9.989-9.989zm-11.507-6.357c.125-.055.293-.053.311-.22.015-.148.044-.046.08-.1.035-.053-.067-.138-.11-.146-.064-.014-.108.069-.149.104l-.072.019-.068.087.008.048-.087.106c-.085.084.002.139.087.102z"></path></svg></button>\'',n.insertBefore(c,n.firstChild)}}e.on("move",(function(){x(e.getCenter().lng.toFixed(4)),N(e.getCenter().lat.toFixed(4)),U(e.getZoom().toFixed(2)),J(e.getPitch().toFixed(4)),Y(e.getBearing().toFixed(4))})),e.on("load",(function(){e.addSource("locations",{type:"geojson",data:{type:"FeatureCollection",features:be.map((function(e){return{type:"Feature",id:e.location_id,properties:{title:e.name,image:e.images[0]},geometry:{type:"Point",coordinates:e.coordinates}}}))}}),ie&&function(e,t){e.addSource("user",{type:"geojson",data:{type:"FeatureCollection",features:[{geometry:{type:"Point",coordinates:[t.coords.longitude,t.coords.latitude]}}]}}),e.addLayer({id:"user",type:"circle",source:"user",paint:{"circle-color":"#00ffff","circle-radius":5}})}(e,ie),e.addLayer({id:"locations",type:"circle",source:"locations",paint:{"circle-color":["case",["boolean",["feature-state","hover"],!1],"#000",["boolean",["feature-state","filtered"],!1],"#ff00ff","#ff0000"],"circle-radius":10,"circle-stroke-width":2,"circle-stroke-color":"#000000"}}),e.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),e.setTerrain({source:"mapbox-dem",exaggeration:1}),e.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,0],"sky-atmosphere-sun-intensity":15}})}));var o=new d.a.Popup({closeButton:!1,closeOnClick:!1}),i=null;return e.on("mousedown","locations",(function(e){l.push("".concat(B(pe.pathname),"/").concat(e.features[0].properties.title))})),e.on("mousemove","locations",(function(t){e.getCanvas().style.cursor="pointer";for(var a=t.features[0].geometry.coordinates.slice(),n=T(t.features[0].properties.title,t.features[0].properties.image);Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;b.current.fire("closeAllPopups"),o.setLngLat(a).setHTML(n).addTo(e),t.features.length>0&&(i&&e.setFeatureState({source:"locations",id:i},{hover:!1}),i=t.features[0].id,e.setFeatureState({source:"locations",id:i},{hover:!0}))})),e.on("mouseleave","locations",(function(){null!=i&&e.setFeatureState({source:"locations",id:i},{hover:!1}),i=null,e.getCanvas().style.cursor="",o.remove()})),function(){return e.remove()}}),[be,de,ie]),Object(L.jsxs)(L.Fragment,{children:[Object(L.jsxs)("div",{className:"topbar",children:[Object(L.jsx)(j.a,{className:s.menuButton+("/"===k.a.dirname(pe.pathname)?"":" smallClose"),onClick:function(){return K((function(e){return!e}))},children:q?Object(L.jsx)(h.a,{className:s.menuIcon}):Object(L.jsx)(g.a,{className:s.menuIcon})}),Object(L.jsx)("div",{className:"logo",children:"Secret Cities - ".concat(I(t))}),Object(L.jsx)(m.a,{size:"small",variant:"contained",onClick:function(){return l.push(B(pe.pathname)==="/".concat(t)?"".concat(B(pe.pathname),"/suggest"):"/".concat(t,"/suggest"))},className:s.suggestButton+" suggestButton",children:"Suggest"})]}),Object(L.jsx)("div",{className:"topSpacer"}),Object(L.jsxs)("div",{className:"mainContent",children:[ae?Object(L.jsx)(_,{city:t,closeModal:function(){ne(!1),window.localStorage.setItem("startModal",!0)}}):null,Object(L.jsx)(R,{open:q,locations:be,mapRef:b,city:t}),Object(L.jsxs)(S.c,{children:[Object(L.jsx)(S.a,{exact:!0,path:"/".concat(t,"/suggest"),children:Object(L.jsx)(D,{city:t,coordinates:a})}),Object(L.jsx)(S.a,{path:"/".concat(t,"/:locationName"),children:Object(L.jsx)(Z,{locations:be,city:t})})]})]}),Object(L.jsx)("div",{ref:u,className:"map-container"})]})},A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,207)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),o(e),i(e)}))},H=a(41),W=[{name:"vancouver",id:2,coordinates:[-123.1207,49.2827]},{name:"montreal",id:1,coordinates:[-73.6073,45.5017]},{name:"calgary",id:3,coordinates:[-114.0719,51.0447],initialZoom:11}];s.a.render(Object(L.jsx)(o.a.StrictMode,{children:Object(L.jsx)("div",{className:"allWrapper",children:Object(L.jsx)(H.a,{children:Object(L.jsxs)(S.c,{children:[W.map((function(e){return Object(L.jsx)(S.a,{path:"/".concat(e.name),children:Object(L.jsx)(U,{city:e.name,coordinates:e.coordinates,id:e.id,initialZoom:e.initialZoom})},e.name)})),Object(L.jsx)(S.a,{exact:!0,path:"/",children:Object(L.jsx)("div",{className:"mainPageContainer",children:W.map((function(e){return Object(L.jsx)("div",{style:{margin:"20px"},children:Object(L.jsx)(m.a,{variant:"contained",component:function(t){return Object(L.jsx)(H.b,Object(n.a)({to:"".concat(e.name)},t))},children:e.name})},e.name)}))})})]})})})}),document.getElementById("root")),A()}},[[187,1,2]]]);
//# sourceMappingURL=main.0ea20006.chunk.js.map